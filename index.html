<!DOCTYPE html> 
<html lang="en"> 
	
<head> 
	<meta charset="UTF-8"> 
	<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> 	
</head> 

<body> 
	
	<h4>Gyroscope</h4>
	<ul>
	  <li>X-axis: <span id="Gyroscope_x">0</span><span>&deg;/s</span></li>
	  <li>Y-axis: <span id="Gyroscope_y">0</span><span>&deg;/s</span></li>
	  <li>Z-axis: <span id="Gyroscope_z">0</span><span>&deg;/s</span></li>
	</ul>
	<table cellspacing=0 border=1>
		<tr>
			<td></td>
			<td><h4>Max</h4></td>
			<td><h4>Min</h4></td>
		</tr>
		<tr>
			<td>X</td>
			<td><h1 id="xmax">0</h1></td>
			<td><h1 id="xmin">0</h1></td>
		</tr>
		<tr>
			<td>Y</td>
			<td><h1 id="ymax">0</h1></td>
			<td><h1 id="ymin">0</h1></td>
		</tr>
		<tr>
			<td>Z</td>
			<td><h1 id="zmax">0</h1></td>
			<td><h1 id="zmin">0</h1></td>
		</tr>
	</table>
	<script>
	xmax = 0
	xmin = 0
	ymax = 0
	ymin = 0
	zmax = 0
	zmin = 0
	
	function updateFieldIfNotNull(fieldName, value, precision=2){
	  if (value != null)
		document.getElementById(fieldName).innerHTML = value.toFixed(precision);
	}
	
	function updateMinMax(min_name, max_name, value, min_val, max_val){
		if (value == null)
			return;
		value = Math.round(value*10);
		if (value > max_val){
			max_val = value;
			min_val = 0
		}
		if (value < min_val){
			min_val = value;
			max_val = 0
		}
		document.getElementById(max_name).innerHTML = max_val.toFixed(2);
		document.getElementById(min_name).innerHTML = min_val.toFixed(2);
	}
	
	function handleMotion(event) {
		gx = event.rotationRate.beta;
		updateMinMax("xmin", "xmax", gx, xmin, xmax);
		
		gy = event.rotationRate.gamma;
		updateMinMax("ymin", "ymax", gy, ymin, ymax);
		
		gz = event.rotationRate.alpha;
		updateMinMax("zmin", "zmax", gz, zmin, zmax);
		
		updateFieldIfNotNull('Gyroscope_z', event.rotationRate.alpha);	
		updateFieldIfNotNull('Gyroscope_x', event.rotationRate.beta);
		updateFieldIfNotNull('Gyroscope_y', event.rotationRate.gamma);
	}
	window.addEventListener("devicemotion", handleMotion);
	</script> 
</body> 
	
</html>
